<Project Sdk="Microsoft.NET.Sdk">
  <Import Project="..\..\tools\common.props" />
  <PropertyGroup Label="Configuration" Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <OutputType>Library</OutputType>
  </PropertyGroup>
  <PropertyGroup>
  <BuildPlatform>x64,x86</BuildPlatform>
</PropertyGroup>
  <PropertyGroup>
    <Description>Brotli compression APIs</Description>
    <Copyright>Microsoft Corporation, All rights reserved.</Copyright>
    <TargetFramework>netstandard1.4</TargetFramework>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <ApplicationIcon />
    <OutputTypeEx>library</OutputTypeEx>
    <StartupObject />
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Platform)' == 'x64'">
    <SourceArch>x64</SourceArch>
    <DefineConstants>BIT64;$(DefineConstants)</DefineConstants>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Platform)' == 'x86'">
    
    <SourceArch>x86</SourceArch>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(OS)' == 'Windows_NT'">
    <SourceSystem>windows</SourceSystem>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(OS)' == 'Unix'">
    <SourceSystem>linux</SourceSystem>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(OS)' == 'OSX'">
    <SourceSystem>osx</SourceSystem>
  </PropertyGroup>
  <PropertyGroup>
    <BrotliPath>..\..\external\Brotli\lib\$(SourceSystem)\$(SourceArch)</BrotliPath>
  </PropertyGroup>
  <ItemGroup>
    <BrotliLibraries Include="$(BrotliPath)\*.*" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetsUnix)' == 'true'">
    <Compile Include="System\IO\Compression\Interop\Library.Unix.cs" />
  </ItemGroup>
  <ItemGroup Condition=" '$(TargetsWindows)' == 'true'">
    <Compile Include="System\IO\Compression\Interop\Library.Windows.cs" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="$(BrotliPath)\**">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
  </ItemGroup>
  <PropertyGroup Condition="'$(Platform)' == 'x64'">
    <PlatformTarget>x64</PlatformTarget>
    <Prefer32Bit>false</Prefer32Bit>
    <BaseAddress>0x180000000</BaseAddress>
    <DefineConstants>BIT64;AMD64;$(DefineConstants)</DefineConstants>
  </PropertyGroup>
  <Target Name="DisplayMessages">
    <Message Text="Platform: $(Platform)" />
     <Message Text="Build Platform $(BuildPlatform) " />
      <Message Text="OS is $(OS) " />
  </Target>

  <ItemGroup>
    <PackageReference Include="System.Runtime.CompilerServices.Unsafe" Version="$(SystemCompilerServicesUnsafeVersion)" />
    <PackageReference Include="System.Memory" Version="$(SystemMemoryVersion)" />
  </ItemGroup>
  <ItemGroup>
    <Folder Include="Resources\" />
  </ItemGroup>

</Project>
